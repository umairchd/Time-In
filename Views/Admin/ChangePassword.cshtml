@{
    ViewBag.Title = "ChangePassword";
    Layout = "~/Views/Shared/AdminLayout.cshtml";
}

<div class="container">
    

    <div class="col-md-4 col-md-offset-4">
        @if (ViewBag.changed == true)
        {
            <div class="alert alert-dismissible alert-success">Password changed</div>
        }
        @if (ViewBag.changed == false)
        {
            <div class="alert alert-dismissible alert-danger">Old password is incorrect</div>
        }
        <h2>ChangePassword</h2>
        @using (Html.BeginForm("ChangePasswordNow", "Admin", FormMethod.Post, new {@class = "form-horizontal form-signin"}))
      
        {
            <div class="form-group">
                <label>Old Password</label>
                <input type="password" id="oldpassword" class="form-control" name="oldpassword" required/>
                <label>New Password</label>
                <input type="password" id="newpassword" class="form-control" name="newpassword" required/>
                <label>Confirm Password</label>
                <br/><span id="err" class="text-danger"></span>
                <input type="password" class="form-control" onblur="return checkpassword()" id="cnfrmpwd" required/>
                <br/>
                <input type="submit" value="change password" class="btn btn-success" />
            </div>
        }
    </div>

</div>

<script>
    function checkpassword(control) {
        var x = $('#newpassword').val();
        var y = $('#cnfrmpwd').val();

        if (x != y) {
            $('#err').text("Passwords donot match");
            return false;
        } else {
            $('#err').text("");
            return false;
        }
    }
    
</script>
